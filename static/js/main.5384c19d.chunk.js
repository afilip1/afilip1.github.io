(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{12:function(e,t,n){e.exports=n(18)},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(9),i=n.n(l),o=(n(17),n(20)),c=n(1),u=n(19);Array.prototype.equals=function(e){return this.length===e.length&&this.every((function(t,n){return t===e[n]}))},Array.prototype.shuffle=function(){for(var e=this.length-1;e>0;e--){var t=Math.floor(Math.random()*(e+1)),n=[this[t],this[e]];this[e]=n[0],this[t]=n[1]}return this},Array.prototype.zip=function(e){return this.map((function(t,n){return[t,e[n]]}))},Array.prototype.withIndex=function(){return Array.from(this.entries())},Array.prototype.countBy=function(e){return this.filter(e).length};var s,f=function(e,t){return Array.from({length:t-e},(function(t,n){return n+e}))},m=n(8);function d(e){var t=e.initSize,n=e.initMineCount,r=function(e){var t=Object(a.useState)(e),n=Object(c.a)(t,2),r=n[0],l=n[1],i=Object(a.useCallback)((function(e){var t,n=[(t=e)%r,Math.floor(t/r)],a=Object(c.a)(n,2),l=a[0],i=a[1];return[[l-1,i-1],[l,i-1],[l+1,i-1],[l-1,i],[l+1,i],[l-1,i+1],[l,i+1],[l+1,i+1]].filter((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return n>=0&&n<r&&a>=0&&a<r})).map((function(e){var t=Object(c.a)(e,2),n=t[0];return t[1]*r+n}))}),[r]);return{gridSize:r,setGridSize:l,getNeighbors:i}}(t),l=r.gridSize,i=r.setGridSize,o=r.getNeighbors,u=Object(a.useState)(n),f=Object(c.a)(u,2),d=f[0],v=f[1],h=Object(a.useState)(null),g=Object(c.a)(h,2),b=g[0],p=g[1],E=Object(a.useState)([]),C=Object(c.a)(E,2),y=C[0],O=C[1],j=Object(a.useState)([]),k=Object(c.a)(j,2),S=k[0],M=k[1],A=Object(a.useState)(Array(l*l).fill(!1)),z=Object(c.a)(A,2),L=z[0],w=z[1],R=Object(a.useState)(Array(l*l).fill(!1)),D=Object(c.a)(R,2),I=D[0],N=D[1],x=Object(a.useState)(Array(l*l).fill(!1)),B=Object(c.a)(x,2),G=B[0],P=B[1],T=Object(a.useCallback)((function(e){var t=Array(l*l-1).fill(!0,0,d).fill(!1,d).shuffle();t.splice(e,0,!1);var n=t.withIndex().map((function(e){var n=Object(c.a)(e,2),a=n[0];return n[1]?null:o(a).countBy((function(e){return t[e]}))}));O(t),M(n)}),[l,d,o]),U=Object(a.useCallback)((function(){var e=y.map((function(e){return!e})),t=y.equals(I);return L.equals(e)&&t?s.Won:L.zip(y).some((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return n&&a}))?s.Lost:s.InProgress}),[y,I,L]),q=Object(a.useCallback)((function(e){if(U()===s.InProgress){if(0===y.length)return T(e),void p(e);var t=function(){for(var e=L.slice(),t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(n.forEach((function(t){return e[t]=!0}));n.length>0;){var r=n.shift();if(y[r]&&function(){e[r]=!0;var t=o(r).concat(r),n=Array(l*l).fill(!0);t.forEach((function(e){return n[e]=!1})),P(n)}(),0===S[r]){var i=o(r).filter((function(t){return!e[t]}));i.forEach((function(t){return e[t]=!0})),n.push.apply(n,Object(m.a)(i))}}return e};I[e]||(y[e]?function(e){var t=L.zip(y).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return n||a}));w(t);var n=o(e).concat(e),a=Array(l*l).fill(!0);n.forEach((function(e){return a[e]=!1})),P(a)}(e):L[e]?function(e){var n=o(e);if(n.filter((function(e){return I[e]})).length===S[e]){var a=n.filter((function(e){return!(L[e]||I[e])}));w(t.apply(void 0,Object(m.a)(a)))}}(e):function(e){var n=t(e),a=I.slice();a[e]=!1,w(n),N(a)}(e))}}),[y,L,I,S,U,o,T]);b&&(q(b),p(null));var W=function(e){var t=I.slice();t[e]=!t[e],N(t)};return{gridSize:l,mineCount:d,setMineCount:v,board:{mines:y,revealed:L,flagged:I,adjacent:S,dimmed:G},resetBoard:function(e,t){i(e),v(t),O([]),M([]),w(Array(e*e).fill(!1)),N(Array(e*e).fill(!1)),P(Array(e*e).fill(!1))},handleCellLeftClick:q,handleCellRightClick:function(e,t){e.preventDefault(),U()===s.InProgress&&W(t)},handleCellMiddleOver:function(e){var t=o(e).concat(e),n=Array(l*l).fill(!0);t.forEach((function(e){return n[e]=!1})),P(n)},handleMiddleUp:function(){P(Array(l*l).fill(!1))},flagCell:W,getGameState:U}}function v(e){var t,n=e.gameState,a=e.minesLeft;switch(n){case s.InProgress:t="Flags left: "+a;break;case s.Won:t="You won!";break;case s.Lost:t="You lost :("}return r.a.createElement("h2",null,t)}function h(e){var t=Object(a.useState)(e.gridSize),n=Object(c.a)(t,2),l=n[0],i=n[1],o=Object(a.useState)(e.mineCount),u=Object(c.a)(o,2),s=u[0],f=u[1],m=Object(a.useState)(!1),d=Object(c.a)(m,2),h=d[0],g=d[1];return r.a.createElement("div",{className:"control-panel"},r.a.createElement("h1",null,"MINEKONG"),r.a.createElement(v,{gameState:e.gameState,minesLeft:e.minesLeft}),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSettingsUpdate(l,s),g(!1)},autoComplete:"off"},r.a.createElement("label",null,"Grid size",r.a.createElement("input",{name:"gridSize",type:"text",value:l,onChange:function(e){i(+e.currentTarget.value),g(!0)}})),r.a.createElement("label",null,"Mine count",r.a.createElement("input",{name:"mineCount",type:"text",value:s,onChange:function(e){f(+e.currentTarget.value),g(!0)}})),r.a.createElement("button",{type:"submit"},h?"Apply and restart":"Restart")),r.a.createElement("div",{className:"rules"},r.a.createElement("div",null,r.a.createElement("h2",null,"Rules"),r.a.createElement("p",null,"A board contains a number of cells. Each cell can be either empty or a mine."),r.a.createElement("p",null,"The goal of the game is to flag all the mines and reveal all the empty cells."),r.a.createElement("p",null,"If you reveal a mine, it's game over!"),r.a.createElement("p",null,"Empty cells show a number of mines that reside in the 8 adjacent cells.")),r.a.createElement("div",null,r.a.createElement("h2",null,"Controls"),r.a.createElement("p",null,r.a.createElement("strong",null,"Left click")," on an unrevealed cell to reveal it."),r.a.createElement("p",null,r.a.createElement("strong",null,"Right click")," on an unrevealed cell to flag it as a mine."),r.a.createElement("p",null,r.a.createElement("strong",null,"Hold middle mouse button")," over an revealed cell to highlight its neighbors."),r.a.createElement("p",null,r.a.createElement("strong",null,"Tip #1:")," If you've placed enough flags near a revealed cell, you can left click on it to automatically reveal cells without flags."),r.a.createElement("p",null,r.a.createElement("strong",null,"Tip #2:")," The first cell you click will never be a mine, so don't worry about where to click."))))}!function(e){e[e.InProgress=0]="InProgress",e[e.Won=1]="Won",e[e.Lost=2]="Lost"}(s||(s={}));var g=n(10);function b(e){var t=e.isRevealed,n=e.isDimmed,a=e.onLeftClick,l=e.onRightClick,i=e.onMiddleOver,o=e.children,c="cell cell-active";return t&&(c+=" cell-revealed"),n&&(c+=" cell-dimmed"),r.a.createElement("button",{className:c,onClick:a,onContextMenu:l,onMouseEnter:i,onMouseDown:i},o)}function p(e){var t=e.isFlagged,n=e.isDimmed,a=e.onLeftClick,l=e.onRightClick;return r.a.createElement(b,{isRevealed:!1,isDimmed:n,onLeftClick:a,onRightClick:l,onMiddleOver:function(){}},t&&"\ud83d\udea9")}function E(e){var t=e.isMine,n=e.isDimmed,a=e.adjacentCount,l=e.onLeftClick,i=e.onMiddleOver,o=[void 0,"blue","green","red","purple","maroon","turquoise","black","gray"];return r.a.createElement(b,{isRevealed:!0,isDimmed:n,onLeftClick:l,onRightClick:function(e){return e.preventDefault()},onMiddleOver:i},t&&"\ud83d\udca3",null!==a&&a>0&&r.a.createElement("span",{style:{color:o[a]}},a))}function C(e){var t=e.size,n=Object(g.a)(e,["size"]),a=f(0,t*t),l=f(0,t).map((function(e){return r.a.createElement("div",{className:"board-row",key:e},a.slice(e*t,(e+1)*t).map((function(e){return function(e,t){var n=e.board,a=n.mines,l=n.flagged,i=n.revealed,o=n.adjacent,c=n.dimmed,u=e.onLeftClick,s=e.onRightClick,f=e.onMiddleOver;return i[t]?r.a.createElement(E,{key:t,isMine:a[t],isDimmed:c[t],onLeftClick:function(){return u(t)},onMiddleOver:function(e){return f(e,t)},adjacentCount:o[t]}):r.a.createElement(p,{key:t,isDimmed:c[t],isFlagged:l[t],onLeftClick:function(){return u(t)},onRightClick:function(e){return s(e,t)}})}(n,e)})))}));return r.a.createElement("div",{className:"board"},l)}function y(){var e,t,n=Object(u.a)(["minekong"]),a=Object(c.a)(n,2),l=a[0],i=a[1],o=d({initSize:null!==(e=l.size)&&void 0!==e?e:9,initMineCount:null!==(t=l.mineCount)&&void 0!==t?t:10}),s=o.gridSize,f=o.mineCount,m=o.board,v=o.resetBoard,g=o.handleCellLeftClick,b=o.handleCellRightClick,p=o.handleCellMiddleOver,E=o.handleMiddleUp,y=o.getGameState;return r.a.createElement("div",{className:"game",onContextMenu:function(e){return e.preventDefault()},onMouseUp:function(e){1===e.button&&E()}},r.a.createElement(h,{gridSize:s,mineCount:f,gameState:y(),minesLeft:f-m.flagged.countBy(Boolean),onSettingsUpdate:function(e,t){i("size",e),i("mineCount",t),v(e,t)}}),r.a.createElement(C,{size:s,board:m,onLeftClick:g,onRightClick:b,onMiddleOver:function(e,t){4===e.buttons&&p(t)}}))}function O(){return r.a.createElement(o.a,null,r.a.createElement(y,null))}i.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.5384c19d.chunk.js.map