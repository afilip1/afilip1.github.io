(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{17:function(e,n,t){e.exports=t(24)},24:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(10),i=t.n(o),l=t(3),c=t(2);Array.prototype.equals=function(e){return this.length===e.length&&this.every((function(n,t){return n===e[t]}))},Array.prototype.shuffle=function(){for(var e=this.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),t=[this[n],this[e]];this[e]=t[0],this[n]=t[1]}return this},Array.prototype.zip=function(e){return this.map((function(n,t){return[n,e[t]]}))},Array.prototype.withIndex=function(){return Array.from(this.entries())},Array.prototype.countBy=function(e){return this.filter(e).length};var u,s=t(8);function d(e){var n=e.initSize,t=e.initMineCount,a=function(e){var n=Object(r.useState)(e),t=Object(l.a)(n,2),a=t[0],o=t[1],i=Object(r.useCallback)((function(e){var n,t=[(n=e)%a,Math.floor(n/a)],r=Object(l.a)(t,2),o=r[0],i=r[1];return[[o-1,i-1],[o,i-1],[o+1,i-1],[o-1,i],[o+1,i],[o-1,i+1],[o,i+1],[o+1,i+1]].filter((function(e){var n=Object(l.a)(e,2),t=n[0],r=n[1];return t>=0&&t<a&&r>=0&&r<a})).map((function(e){var n=Object(l.a)(e,2),t=n[0];return n[1]*a+t}))}),[a]);return{gridSize:a,setGridSize:o,getNeighbors:i}}(n),o=a.gridSize,i=a.setGridSize,c=a.getNeighbors,d=Object(r.useState)(t),f=Object(l.a)(d,2),g=f[0],m=f[1],h=Object(r.useState)(null),b=Object(l.a)(h,2),p=b[0],v=b[1],y=Object(r.useState)([]),x=Object(l.a)(y,2),E=x[0],j=x[1],O=Object(r.useState)([]),k=Object(l.a)(O,2),w=k[0],S=k[1],C=Object(r.useState)(Array(o*o).fill(!1)),z=Object(l.a)(C,2),A=z[0],T=z[1],I=Object(r.useState)(Array(o*o).fill(!1)),P=Object(l.a)(I,2),R=P[0],M=P[1],L=Object(r.useState)(Array(o*o).fill(!1)),D=Object(l.a)(L,2),U=D[0],B=D[1],F=Object(r.useState)(null),N=Object(l.a)(F,2),G=N[0],H=N[1],J=Object(r.useCallback)((function(e){var n=Array(o*o-1).fill(!0,0,g).fill(!1,g).shuffle();n.splice(e,0,!1);var t=n.withIndex().map((function(e){var t=Object(l.a)(e,2),r=t[0];return t[1]?null:c(r).countBy((function(e){return n[e]}))}));j(n),S(t)}),[o,g,c]),W=Object(r.useCallback)((function(){var e=E.map((function(e){return!e}));return A.equals(e)?u.Won:A.zip(E).some((function(e){var n=Object(l.a)(e,2),t=n[0],r=n[1];return t&&r}))?u.Lost:u.InProgress}),[E,A]),q=Object(r.useCallback)((function(){for(var e=A.slice(),n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];for(t.forEach((function(n){return e[n]=!0}));t.length>0;){var a=t.shift();if(E[a]&&function(){e[a]=!0;var n=c(a).concat(a),t=Array(o*o).fill(!0);n.forEach((function(e){return t[e]=!1})),B(t)}(),0===w[a]){var i=c(a).filter((function(n){return!e[n]}));i.forEach((function(n){return e[n]=!0})),t.push.apply(t,Object(s.a)(i))}}return e}),[w,c,o,E,A]),Y=Object(r.useCallback)((function(e){if(W()===u.InProgress){if(0===E.length)return J(e),void v(e);R[e]||(E[e]?function(e){var n=A.zip(E).map((function(e){var n=Object(l.a)(e,2),t=n[0],r=n[1];return t||r}));T(n);var t=c(e).concat(e),r=Array(o*o).fill(!0);t.forEach((function(e){return r[e]=!1})),B(r)}(e):function(e){var n=q(e),t=R.slice();t[e]=!1,T(n),M(t)}(e),H(e))}}),[o,E,A,R,W,c,J,q]);null!==p&&(Y(p),v(null));return{gridSize:o,mineCount:g,setMineCount:m,board:{mines:E,revealed:A,flagged:R,adjacent:w,dimmed:U,lastRevealed:G},resetBoard:function(e,n){i(e),m(n),j([]),S([]),T(Array(e*e).fill(!1)),M(Array(e*e).fill(!1)),B(Array(e*e).fill(!1)),H(null)},tryRevealCell:Y,tryFlagCell:function(e){if(W()===u.InProgress&&!A[e]){var n=R.slice();n[e]=!n[e],M(n)}},tryRevealUnflaggedNeighbors:function(e){var n=c(e);if(n.filter((function(e){return R[e]})).length===w[e]){var t=n.filter((function(e){return!(A[e]||R[e])}));T(q.apply(void 0,Object(s.a)(t)))}},highlightCells:function(e){var n=c(e).concat(e),t=Array(o*o).fill(!0);n.forEach((function(e){return t[e]=!1})),B(t)},unhighlightCells:function(){B(Array(o*o).fill(!1))},getGameState:W}}!function(e){e[e.InProgress=0]="InProgress",e[e.Won=1]="Won",e[e.Lost=2]="Lost"}(u||(u={}));var f=t(14),g=t(1);function m(){var e=Object(c.a)(["\n   flex: 1;\n\n   display: flex;\n   align-items: center;\n   justify-content: center;\n\n   box-sizing: border-box;\n   \n   color: white;\n   font-size: 1.15rem;\n   font-weight: 900;\n   \n   background: ",";\n   border: 5px solid ",";\n\n   ","\n   \n   ","\n\n   ","\n"]);return m=function(){return e},e}function h(){var e=Object(c.a)(["\n   position: relative;\n\n   display: flex;\n\n   box-shadow: 3px 3px 5px rgba(0, 0, 0, 0.1);\n   border: 1px solid white;\n"]);return h=function(){return e},e}var b=g.d.div(h()),p=g.d.div(m(),(function(e){return e.theme.primary}),(function(e){return e.theme.primaryDark}),(function(e){return e.dimmed&&"\n      filter: brightness(0.8) opacity(0.7) blur(1px) saturate(0.5);\n      border: 1px solid darkgray;\n   "}),(function(e){return e.flagged&&"  \n      background: ".concat(e.theme.secondary,";\n      border-color: ").concat(e.theme.secondaryDark,";\n   ")}),(function(e){return e.revealed&&"\n      background: ".concat(e.theme.tertiary,";\n      border-color: ").concat(e.theme.tertiaryDark,";\n   ")}));function v(e){var n=e.dimmed,t=e.revealed,r=e.flagged,o=e.onPointerUp,i=e.children;return a.a.createElement(b,{onPointerUp:o},a.a.createElement(p,{dimmed:n,revealed:t,flagged:r},i))}function y(){var e=Object(c.a)(["\n   flex: 1;\n   background-color: ",";\n   height: 100%;\n"]);return y=function(){return e},e}function x(){var e=Object(c.a)(["\n   position: absolute;\n\n   display: flex;\n   align-items: center;\n   justify-content: center;\n\n   width: 90px;\n   height: 45px;\n\n   ","\n\n   box-shadow: 3px 3px 3px rgba(0,0,0,0.2);\n\n   border: 2px solid white;\n   border-radius: 10px;\n\n   z-index: 1;\n\n   // arrow\n   &::after {\n      content: '';\n      position: absolute;\n      border-width: 7px;\n      border-style: solid;\n      \n      ","\n   }\n\n   *:first-child {\n      border-top-left-radius: 8px;\n      border-bottom-left-radius: 8px;\n   }\n\n   *:last-child {\n      border-top-right-radius: 8px;\n      border-bottom-right-radius: 8px;\n   }\n"]);return x=function(){return e},e}var E=g.d.div(x(),(function(e){return e.above?"bottom: 100%;":"top: 100%;"}),(function(e){return e.above?"top: 100%;\n      border-color: white transparent transparent transparent;":"bottom: 100%;\n      border-color: transparent transparent white transparent;"})),j=g.d.div(y(),(function(e){return e.color})),O=function(e){var n=e.above,t=e.onFlag,o=e.onReveal,i=Object(r.useContext)(g.a);return a.a.createElement(E,{above:n},a.a.createElement(j,{onPointerUp:t,color:i.secondary}),a.a.createElement(j,{onPointerUp:o,color:i.tertiary}))};function k(){var e=Object(c.a)(["\n   position: relative;\n   grid-area: board;\n\n   @media screen and (min-width: 768px) {\n      display: none;\n   }\n\n   box-shadow: inset 0 0 5px ",";\n   pointer-events: none;\n\n   transition: box-shadow 0.3s linear;\n   z-index: 2;\n"]);return k=function(){return e},e}function w(){var e=Object(c.a)(["\n   --cell-size: 40px;\n\n   display: grid;\n   grid-template-columns: repeat(",", var(--cell-size));\n   grid-auto-rows: var(--cell-size);\n   gap: 4px;\n"]);return w=function(){return e},e}function S(){var e=Object(c.a)(["\n   grid-area: board;\n   \n   overflow: auto;\n   padding: 10px 30px;\n\n   overscroll-behavior: none;\n\n   z-index: 1;\n\n   @media screen and (min-width: 768px) {\n      padding: 30px;\n\n      border-left: 1px solid ",";\n      transition: border 0.3s linear;\n   }\n"]);return S=function(){return e},e}var C=g.d.div(S(),(function(e){return e.theme.separator})),z=g.d.div(w(),(function(e){return e.gridSize})),A=g.d.div(k(),(function(e){return e.theme.background}));function T(e){var n,t,o=e.gridSize,i=e.boardState,c=Object(f.a)(e,["gridSize","boardState"]),u=Object(r.useState)(null),s=Object(l.a)(u,2),d=s[0],g=s[1],m=function(){return g(null)},h=(n=0,t=i.revealed.length,Array.from({length:t-n},(function(e,t){return t+n}))).map((function(e){var n=d===e,t=i.revealed[e],r=i.dimmed[e],l=i.flagged[e],u=i.mines[e],s=i.adjacent[e],f=i.lastRevealed===e;return a.a.createElement(v,Object.assign({key:e},{dimmed:r,flagged:l,revealed:t,mine:u,adjacentCount:s,isLastRevealed:f},{onPointerUp:function(r){switch(r.pointerType){case"mouse":switch(r.button){case 0:c.onLeftClick(e);break;case 2:c.onRightClick(r,e)}break;case"touch":t&&0===r.button?(c.onLeftClick(e),m()):n?m():function(e){g(e)}(e)}}}),t&&(u?f?"\ud83d\udca5":"\ud83d\udca3":s>0&&s),n&&a.a.createElement(O,{above:e>o-1,onReveal:function(){return c.onLeftClick(e)},onFlag:function(n){return c.onRightClick(n,e)}}))}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(C,null,a.a.createElement("div",{style:{display:"inline-block"}},a.a.createElement(z,{gridSize:o},h))),a.a.createElement(A,null))}var I=t(16),P={light:!0,foreground:"black",background:"white",separator:"#eee",primary:"#ffaf2a",primaryDark:"#fd9f00",secondary:"#06a4ed",secondaryDark:"#149dd7",tertiary:"#3f3d40",tertiaryDark:"#2a2d32",themeToggle:"#ffaf2a",themeToggleIcon:"url('/img/sun.png')"},R=Object(I.a)({},P,{light:!1,foreground:"white",background:"black",separator:"#222",themeToggle:"#06a4ed",themeToggleIcon:"url('/img/moon.png')"});function M(){var e=Object(c.a)(["\n   width: ","px;\n   height: ","px;\n   \n   border-radius: ","px;\n\n   background-color: ",";\n\n   transition: color 0.3s ease;\n   box-shadow: inset 0 3px 3px rgba(0,0,0,0.2);\n\n   div {\n      position: relative;\n\n      width: ","px;\n      height: ","px;\n\n      top: ","px;\n      left: ","px;\n      \n      background: ",";\n\n      background-size: ","px;\n\n      transition: left 0.3s ease;\n   }\n"]);return M=function(){return e},e}var L=g.d.div.attrs({height:20,children:a.a.createElement("div",null)})(M(),(function(e){return 2*e.height}),(function(e){return e.height}),(function(e){return e.height/2}),(function(e){return e.theme.themeToggle}),(function(e){return 1.4*e.height}),(function(e){return 1.4*e.height}),(function(e){return-e.height/5}),(function(e){return e.theme.light?-e.height/5:e.height-e.height/5}),(function(e){return e.theme.themeToggleIcon}),(function(e){return 1.4*e.height}));function D(){var e=Object(c.a)(["\n   grid-area: header;\n\n   display: flex;\n\n   justify-content: space-between;\n   align-items: center;\n   \n   padding: 0 30px;\n"]);return D=function(){return e},e}function U(){var e=Object(c.a)(["\n   font-weight: 900;\n   margin: 0;\n   text-transform: uppercase;\n"]);return U=function(){return e},e}var B=g.d.h1(U()),F=g.d.header(D());function N(e){var n=e.onThemeToggle;return a.a.createElement(F,null,a.a.createElement("div",null,a.a.createElement(B,null,"Minekong"),a.a.createElement("small",null,"inspired by ",a.a.createElement("a",{href:"https://store.steampowered.com/app/265890/Hexcells/"},"Hexcells"))),a.a.createElement(L,{onClick:n}))}function G(){var e=Object(c.a)(["\n   grid-area: status;\n\n   padding: 0 30px;\n   margin-top: 10px;\n"]);return G=function(){return e},e}var H=g.d.h2(G());function J(e){var n,t=e.gameState,r=e.minesLeft;switch(t){case u.InProgress:n="Flags left: "+r;break;case u.Won:n="You won!";break;case u.Lost:n="You lost :("}return a.a.createElement(H,null,n)}function W(){var e=Object(c.a)(["\n   width: 100%;\n   font-size: 1.5rem;\n   border: none;\n   border-bottom: 3px solid ",";\n   outline: none;\n"]);return W=function(){return e},e}var q=g.d.input(W(),(function(e){return e.theme.secondary}));function Y(e){var n=e.label,t=e.value,r=e.onChange;return a.a.createElement("label",null,n,a.a.createElement(q,{type:"text",value:t,onChange:function(e){return r(+e.currentTarget.value)}}))}function K(){var e=Object(c.a)(["\n   padding: 10px;\n\n   color: white;\n   background-color: ",";\n\n   box-shadow: 3px 3px 5px rgba(0, 0, 0, 0.1);\n   \n   transition: filter 0.5s ease;\n\n   &:active {\n      transition: filter 0s;\n      filter: brightness(1.2);\n   }\n"]);return K=function(){return e},e}var Q=g.d.div(K(),(function(e){return e.theme.secondary}));function V(e){var n=e.label,t=e.gridSize,r=e.mineCount,o=e.onSelectPreset;return a.a.createElement(Q,{onClick:function(){return o(t,r)}},a.a.createElement("strong",null,n),a.a.createElement("br",null),a.a.createElement("small",null,t,"x",t,a.a.createElement("br",null),r," mines"))}function X(){var e=Object(c.a)(["\n   font-size: 1.2rem;\n   font-weight: 700;\n   width: 100%;\n"]);return X=function(){return e},e}function Z(){var e=Object(c.a)(["\n   display: grid;\n   grid-template-columns: repeat(",", 1fr);\n   gap: 10px;\n   margin: 10px 0;\n"]);return Z=function(){return e},e}function $(){var e=Object(c.a)(["\n   grid-area: settings;\n\n   padding: 0 30px;\n"]);return $=function(){return e},e}var _=g.d.div($()),ee=g.d.div(Z(),(function(e){return e.columns})),ne=g.d.button(X());function te(e){var n=Object(r.useState)(e.gridSize),t=Object(l.a)(n,2),o=t[0],i=t[1],c=Object(r.useState)(e.mineCount),u=Object(l.a)(c,2),s=u[0],d=u[1],f=function(n,t){i(n),d(t),e.onSettingsUpdate(n,t)};return a.a.createElement(_,null,a.a.createElement("form",{onSubmit:function(n){n.preventDefault(),e.onSettingsUpdate(o,s)}},a.a.createElement(ee,{columns:2},a.a.createElement(Y,{label:"Grid size",value:o,onChange:i}),a.a.createElement(Y,{label:"Mine count",value:s,onChange:d})),a.a.createElement(ee,{columns:3},a.a.createElement(V,{label:"Easy",gridSize:9,mineCount:10,onSelectPreset:f}),a.a.createElement(V,{label:"Medium",gridSize:16,mineCount:40,onSelectPreset:f}),a.a.createElement(V,{label:"Hard",gridSize:24,mineCount:99,onSelectPreset:f})),a.a.createElement(ne,null,"Restart")))}function re(){var e=Object(c.a)(["\n   grid-area: info;\n   \n   padding: 0 30px;\n\n   @media screen and (min-width: 768px) {\n      overflow-y: auto;\n   }\n"]);return re=function(){return e},e}var ae=g.d.div(re());function oe(){return a.a.createElement(ae,null,a.a.createElement("details",null,a.a.createElement("summary",null,"Rules"),a.a.createElement("p",null,"The board contains a number of cells. Each cell can be either empty or a mine."),a.a.createElement("p",null,"The goal of the game is to flag all the mines and reveal all the empty cells."),a.a.createElement("p",null,"If you reveal a mine, it's game over!"),a.a.createElement("p",null,"Empty cells show the number of mines that reside in the 8 adjacent cells.")),a.a.createElement("details",null,a.a.createElement("summary",null,"Controls"),a.a.createElement("p",null,a.a.createElement("strong",null,"Left click")," on an unrevealed cell to reveal it."),a.a.createElement("p",null,a.a.createElement("strong",null,"Right click")," on an unrevealed cell to flag it as a mine."),a.a.createElement("p",null,a.a.createElement("strong",null,"Hold middle mouse button")," over an revealed cell to highlight its neighbors."),a.a.createElement("p",null,a.a.createElement("strong",null,"Tip #1:")," If you've placed enough flags near a revealed cell, you can left click on it to automatically reveal cells without flags."),a.a.createElement("p",null,a.a.createElement("strong",null,"Tip #2:")," The first cell you click will never be a mine, so don't worry about where to click.")))}function ie(){var e=Object(c.a)(['\n   height: 100vh;\n   overflow: auto;\n   \n   display: grid;\n   grid-template-rows: 90px 330px 40px 210px 70px;\n   grid-template-areas:\n      "header"\n      "board"\n      "status"\n      "settings"\n      "info";\n\n   @media screen and (min-width: 768px) {\n      grid-template-columns: 360px auto;\n      grid-template-rows: 100px 80px 230px auto;\n      grid-template-areas:\n         "header   board"\n         "status   board"\n         "settings board"\n         "info     board";\n   }\n\n   color: ',";\n   background-color: ",";\n\n   transition: color 0.3s linear,\n               background-color 0.3s linear;\n\n   a {\n      color: ",";\n      transition: color 0.3s linear;\n   }\n   \n   input {\n      color: ",";\n      background-color: ",";\n\n      transition: color 0.3s linear,\n                  background-color 0.3s linear;\n   }\n"]);return ie=function(){return e},e}function le(){var e=Object(c.a)(["      \n   html, body {\n      margin: 0;\n      user-select: none;\n   }\n      \n   ::-moz-focus-inner {\n      border: 0;\n   }\n\n   * {\n      font-family: 'Montserrat', sans-serif;\n   }\n"]);return le=function(){return e},e}var ce=Object(g.c)(le()),ue=g.d.div(ie(),(function(e){return e.theme.foreground}),(function(e){return e.theme.background}),(function(e){return e.theme.foreground}),(function(e){return e.theme.foreground}),(function(e){return e.theme.background}));function se(){var e=d({initSize:9,initMineCount:10}),n=e.gridSize,t=e.mineCount,o=e.board,i=e.resetBoard,c=e.tryRevealCell,u=e.tryRevealUnflaggedNeighbors,s=e.tryFlagCell,f=e.highlightCells,m=e.unhighlightCells,h=e.getGameState,b=function(e,n){var t=localStorage.getItem(e),a=Object(r.useState)(t?JSON.parse(t):n),o=Object(l.a)(a,2),i=o[0],c=o[1];return Object(r.useEffect)((function(){localStorage.setItem(e,JSON.stringify(i))}),[e,i]),[i,c]}("darkTheme",!1),p=Object(l.a)(b,2),v=p[0],y=p[1],x=v?R:P;return a.a.createElement(g.b,{theme:x},a.a.createElement(ce,{theme:x}),a.a.createElement(ue,{onContextMenu:function(e){return e.preventDefault()},onMouseUp:function(e){1===e.button&&m()},onMouseDown:function(e){4===e.buttons&&e.preventDefault()}},a.a.createElement(N,{onThemeToggle:function(){return y(!v)}}),a.a.createElement(J,{gameState:h(),minesLeft:t-o.flagged.countBy(Boolean)}),a.a.createElement(te,{gridSize:n,mineCount:t,onSettingsUpdate:function(e,n){i(e,n)}}),a.a.createElement(oe,null),a.a.createElement(T,{gridSize:n,boardState:o,onLeftClick:function(e){o.revealed[e]?u(e):c(e)},onRightClick:function(e,n){e.preventDefault(),s(n)},onMiddleOver:function(e,n){4===e.buttons&&f(n)}})))}i.a.render(a.a.createElement(se,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.9a328ac2.chunk.js.map