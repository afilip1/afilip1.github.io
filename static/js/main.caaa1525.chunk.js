(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{16:function(e,n,t){e.exports=t(23)},23:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(11),l=t.n(i),o=t(3),c=t(2);Array.prototype.equals=function(e){return this.length===e.length&&this.every((function(n,t){return n===e[t]}))},Array.prototype.shuffle=function(){for(var e=this.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),t=[this[n],this[e]];this[e]=t[0],this[n]=t[1]}return this},Array.prototype.zip=function(e){return this.map((function(n,t){return[n,e[t]]}))},Array.prototype.withIndex=function(){return Array.from(this.entries())},Array.prototype.countBy=function(e){return this.filter(e).length};var u,s=t(9);function f(e){var n=e.initSize,t=e.initMineCount,a=function(e){var n=Object(r.useState)(e),t=Object(o.a)(n,2),a=t[0],i=t[1],l=Object(r.useCallback)((function(e){var n,t=[(n=e)%a,Math.floor(n/a)],r=Object(o.a)(t,2),i=r[0],l=r[1];return[[i-1,l-1],[i,l-1],[i+1,l-1],[i-1,l],[i+1,l],[i-1,l+1],[i,l+1],[i+1,l+1]].filter((function(e){var n=Object(o.a)(e,2),t=n[0],r=n[1];return t>=0&&t<a&&r>=0&&r<a})).map((function(e){var n=Object(o.a)(e,2),t=n[0];return n[1]*a+t}))}),[a]);return{gridSize:a,setGridSize:i,getNeighbors:l}}(n),i=a.gridSize,l=a.setGridSize,c=a.getNeighbors,f=Object(r.useState)(t),d=Object(o.a)(f,2),g=d[0],m=d[1],h=Object(r.useState)(null),b=Object(o.a)(h,2),p=b[0],v=b[1],x=Object(r.useState)([]),y=Object(o.a)(x,2),E=y[0],j=y[1],O=Object(r.useState)([]),k=Object(o.a)(O,2),S=k[0],w=k[1],C=Object(r.useState)(Array(i*i).fill(!1)),z=Object(o.a)(C,2),A=z[0],M=z[1],I=Object(r.useState)(Array(i*i).fill(!1)),R=Object(o.a)(I,2),T=R[0],P=R[1],L=Object(r.useState)(Array(i*i).fill(!1)),B=Object(o.a)(L,2),D=B[0],N=B[1],U=Object(r.useState)(null),G=Object(o.a)(U,2),F=G[0],H=G[1],J=Object(r.useCallback)((function(e){var n=Array(i*i-1).fill(!0,0,g).fill(!1,g).shuffle();n.splice(e,0,!1);var t=n.withIndex().map((function(e){var t=Object(o.a)(e,2),r=t[0];return t[1]?null:c(r).countBy((function(e){return n[e]}))}));j(n),w(t)}),[i,g,c]),W=Object(r.useCallback)((function(){var e=E.map((function(e){return!e}));return A.equals(e)?u.Won:A.zip(E).some((function(e){var n=Object(o.a)(e,2),t=n[0],r=n[1];return t&&r}))?u.Lost:u.InProgress}),[E,A]),q=Object(r.useCallback)((function(){for(var e=A.slice(),n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];for(t.forEach((function(n){return e[n]=!0}));t.length>0;){var a=t.shift();if(E[a]&&function(){e[a]=!0;var n=c(a).concat(a),t=Array(i*i).fill(!0);n.forEach((function(e){return t[e]=!1})),N(t)}(),0===S[a]){var l=c(a).filter((function(n){return!e[n]}));l.forEach((function(n){return e[n]=!0})),t.push.apply(t,Object(s.a)(l))}}return e}),[S,c,i,E,A]),Y=Object(r.useCallback)((function(e){if(W()===u.InProgress){if(0===E.length)return J(e),void v(e);T[e]||(E[e]?function(e){var n=A.zip(E).map((function(e){var n=Object(o.a)(e,2),t=n[0],r=n[1];return t||r}));M(n);var t=c(e).concat(e),r=Array(i*i).fill(!0);t.forEach((function(e){return r[e]=!1})),N(r)}(e):function(e){var n=q(e),t=T.slice();t[e]=!1,M(n),P(t)}(e),H(e))}}),[i,E,A,T,W,c,J,q]);null!==p&&(Y(p),v(null));return{gridSize:i,mineCount:g,setMineCount:m,board:{mines:E,revealed:A,flagged:T,adjacent:S,dimmed:D,lastRevealed:F},resetBoard:function(e,n){l(e),m(n),j([]),w([]),M(Array(e*e).fill(!1)),P(Array(e*e).fill(!1)),N(Array(e*e).fill(!1)),H(null)},tryRevealCell:Y,tryFlagCell:function(e){if(W()===u.InProgress&&!A[e]){var n=T.slice();n[e]=!n[e],P(n)}},tryRevealUnflaggedNeighbors:function(e){var n=c(e);if(n.filter((function(e){return T[e]})).length===S[e]){var t=n.filter((function(e){return!(A[e]||T[e])}));M(q.apply(void 0,Object(s.a)(t)))}},highlightCells:function(e){var n=c(e).concat(e),t=Array(i*i).fill(!0);n.forEach((function(e){return t[e]=!1})),N(t)},unhighlightCells:function(){N(Array(i*i).fill(!1))},getGameState:W}}!function(e){e[e.InProgress=0]="InProgress",e[e.Won=1]="Won",e[e.Lost=2]="Lost"}(u||(u={}));var d=t(6),g=t(1);function m(){var e=Object(c.a)(["\n   box-shadow: 3px 3px 5px rgba(0, 0, 0, 0.1);\n   \n   transition: filter 0.5s ease;\n\n   &:active {\n      transition: filter 0s;\n      filter: brightness(1.2);\n   }\n"]);return m=function(){return e},e}var h=g.c.div(m());function b(){var e=Object(c.a)(["\n   flex: 1;\n\n   display: flex;\n   align-items: center;\n   justify-content: center;\n\n   box-sizing: border-box;\n\n   @media screen and (min-width: 768px) {\n      font-size: 1.5rem;\n   }\n\n   font-weight: 600;\n   color: white;\n\n   background: var(--light-orange);\n   border: 5px solid var(--dark-orange);\n\n   ","\n\n   ","\n\n   ","\n"]);return b=function(){return e},e}function p(){var e=Object(c.a)(["\n   border: 1px solid white;\n\n   display: flex;\n"]);return p=function(){return e},e}var v=Object(g.c)(h)(p()),x=g.c.div(b(),(function(e){return e.dimmed&&"\n      filter: brightness(0.8) opacity(0.7) blur(1px) saturate(0.5);\n      border: 1px solid darkgray;\n   "}),(function(e){return e.revealed&&"\n      background: var(--light-gray);\n      border: 5px solid var(--dark-gray);\n   "}),(function(e){return e.flagged&&"  \n      background: var(--light-blue);\n      border: 5px solid var(--dark-blue); \n   "}));function y(){var e=Object(c.a)(["\n   --cell-size: 30px;\n\n   @media screen and (min-width: 768px) {\n      --cell-size: 50px;\n   }\n\n   display: grid;\n   grid-template-columns: repeat(",", var(--cell-size));\n   grid-auto-rows: var(--cell-size);\n   gap: 4px;\n"]);return y=function(){return e},e}function E(){var e=Object(c.a)(["\n   position: relative;\n   grid-area: board;\n   content: '';\n   height: 330px;\n\n   @media screen and (min-width: 768px) {\n      display: none;\n   }\n\n   box-shadow: inset 0 0 5px ",";\n   pointer-events: none;\n\n   transition: box-shadow 0.3s linear;\n"]);return E=function(){return e},e}function j(){var e=Object(c.a)(["\n   grid-area: board;\n   \n   overflow: auto;\n   padding: 10px 30px;\n\n   @media screen and (min-width: 768px) {\n      padding: 30px;\n\n      border-left: 1px solid ",";\n      transition: border 0.3s linear;\n   }\n"]);return j=function(){return e},e}var O=g.c.div(j(),(function(e){return e.theme.colors.separator})),k=g.c.div(E(),(function(e){return e.theme.colors.background})),S=g.c.div(y(),(function(e){return e.gridSize}));function w(e){var n,t,r=e.gridSize,i=e.boardState,l=Object(d.a)(e,["gridSize","boardState"]),o=(n=0,t=i.revealed.length,Array.from({length:t-n},(function(e,t){return t+n}))).map((function(e){return function(e,n,t){var r=n.revealed[e],i=n.dimmed[e],l=n.flagged[e],o=n.mines[e],c=n.adjacent[e],u=n.lastRevealed===e;return a.a.createElement(v,{key:e,onClick:function(){return t.onLeftClick(e)},onContextMenu:function(n){return t.onRightClick(n,e)},onMouseDown:function(n){return t.onMiddleOver(n,e)},onMouseEnter:function(n){return t.onMiddleOver(n,e)}},a.a.createElement(x,{dimmed:i,revealed:r,flagged:l},r&&(o?u?"\ud83d\udca5":"\ud83d\udca3":c>0&&c)))}(e,i,l)}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(O,null,a.a.createElement("div",{style:{display:"inline-block"}},a.a.createElement(S,{gridSize:r},o))),a.a.createElement(k,null))}var C={light:!0,colors:{text:"black",background:"white",separator:"#eee"}},z={light:!1,colors:{text:"white",background:"black",separator:"#222"}};function A(){var e=Object(c.a)(["\n   width: ","px;\n   height: ","px;\n   \n   border-radius: ","px;\n\n   background-color: ",";\n\n   transition: color 0.3s ease;\n   box-shadow: inset 0 3px 3px rgba(0,0,0,0.2);\n\n   div {\n      position: relative;\n\n      width: ","px;\n      height: ","px;\n\n      top: ","px;\n      left: ","px;\n      \n      background: ",";\n\n      background-size: ","px;\n\n      transition: left 0.3s ease;\n   }\n"]);return A=function(){return e},e}var M=g.c.div.attrs({height:20,children:a.a.createElement("div",null)})(A(),(function(e){return 2*e.height}),(function(e){return e.height}),(function(e){return e.height/2}),(function(e){return e.theme.light?"var(--light-orange)":"var(--light-blue)"}),(function(e){return 1.4*e.height}),(function(e){return 1.4*e.height}),(function(e){return-e.height/5}),(function(e){return e.theme.light?-e.height/5:e.height-e.height/5}),(function(e){return e.theme.light?"url('/img/sun.png')":"url('/img/moon.png')"}),(function(e){return 1.4*e.height}));function I(){var e=Object(c.a)(["\n   grid-area: header;\n\n   display: flex;\n\n   justify-content: space-between;\n   align-items: center;\n   \n   padding: 0 30px;\n"]);return I=function(){return e},e}function R(){var e=Object(c.a)(["\n   font-weight: 900;\n   margin: 0;\n   text-transform: uppercase;\n"]);return R=function(){return e},e}var T=g.c.h1(R()),P=g.c.header(I());function L(e){var n=e.onThemeToggle;return a.a.createElement(P,null,a.a.createElement("div",null,a.a.createElement(T,null,"Minekong"),a.a.createElement("small",null,"inspired by ",a.a.createElement("a",{href:"https://store.steampowered.com/app/265890/Hexcells/"},"Hexcells"))),a.a.createElement(M,{onClick:n}))}function B(){var e=Object(c.a)(["\n   grid-area: status;\n\n   padding: 0 30px;\n   margin-top: 10px;\n"]);return B=function(){return e},e}var D=g.c.h2(B());function N(e){var n,t=e.gameState,r=e.minesLeft;switch(t){case u.InProgress:n="Flags left: "+r;break;case u.Won:n="You won!";break;case u.Lost:n="You lost :("}return a.a.createElement(D,null,n)}function U(){var e=Object(c.a)(["\n   width: 100%;\n   font-size: 1.5rem;\n   border: none;\n   border-bottom: 3px solid var(--light-blue);\n   outline: none;\n"]);return U=function(){return e},e}var G=g.c.input(U());function F(e){var n=e.label,t=e.value,r=e.onChange;return a.a.createElement("label",null,n,a.a.createElement(G,{type:"number",value:t,onChange:function(e){return r(+e.currentTarget.value)}}))}function H(){var e=Object(c.a)(["\n   padding: 10px;\n\n   color: white;\n   background-color: var(--light-blue);\n"]);return H=function(){return e},e}var J=Object(g.c)((function(e){var n=e.label,t=e.children,r=Object(d.a)(e,["label","children"]);return a.a.createElement(h,r,a.a.createElement("strong",null,n),a.a.createElement("br",null),a.a.createElement("small",null,t))}))(H());function W(e){var n=e.label,t=e.gridSize,r=e.mineCount,i=e.onSelectPreset;return a.a.createElement(J,{label:n,onClick:function(){return i(t,r)}},t,"x",t,a.a.createElement("br",null),r," mines")}function q(){var e=Object(c.a)(["\n   font-size: 1.2rem;\n   font-weight: 700;\n   width: 100%;\n"]);return q=function(){return e},e}function Y(){var e=Object(c.a)(["\n   display: grid;\n   grid-template-columns: repeat(",", 1fr);\n   gap: 10px;\n   margin: 10px 0;\n"]);return Y=function(){return e},e}function K(){var e=Object(c.a)(["\n   grid-area: settings;\n\n   padding: 0 30px;\n"]);return K=function(){return e},e}var Q=g.c.div(K()),V=g.c.div(Y(),(function(e){return e.columns})),X=g.c.button(q());function Z(e){var n=Object(r.useState)(e.gridSize),t=Object(o.a)(n,2),i=t[0],l=t[1],c=Object(r.useState)(e.mineCount),u=Object(o.a)(c,2),s=u[0],f=u[1],d=function(n,t){l(n),f(t),e.onSettingsUpdate(n,t)};return a.a.createElement(Q,null,a.a.createElement("form",{onSubmit:function(n){n.preventDefault(),e.onSettingsUpdate(i,s)}},a.a.createElement(V,{columns:2},a.a.createElement(F,{label:"Grid size",value:i,onChange:l}),a.a.createElement(F,{label:"Mine count",value:s,onChange:f})),a.a.createElement(V,{columns:3},a.a.createElement(W,{label:"Easy",gridSize:9,mineCount:10,onSelectPreset:d}),a.a.createElement(W,{label:"Medium",gridSize:16,mineCount:40,onSelectPreset:d}),a.a.createElement(W,{label:"Hard",gridSize:24,mineCount:99,onSelectPreset:d})),a.a.createElement(X,null,"Restart")))}function $(){var e=Object(c.a)(["\n   grid-area: info;\n   \n   padding: 0 30px;\n\n   @media screen and (min-width: 768px) {\n      overflow-y: auto;\n   }\n"]);return $=function(){return e},e}var _=g.c.div($());function ee(){return a.a.createElement(_,null,a.a.createElement("details",null,a.a.createElement("summary",null,"Rules"),a.a.createElement("p",null,"The board contains a number of cells. Each cell can be either empty or a mine."),a.a.createElement("p",null,"The goal of the game is to flag all the mines and reveal all the empty cells."),a.a.createElement("p",null,"If you reveal a mine, it's game over!"),a.a.createElement("p",null,"Empty cells show the number of mines that reside in the 8 adjacent cells.")),a.a.createElement("details",null,a.a.createElement("summary",null,"Controls"),a.a.createElement("p",null,a.a.createElement("strong",null,"Left click")," on an unrevealed cell to reveal it."),a.a.createElement("p",null,a.a.createElement("strong",null,"Right click")," on an unrevealed cell to flag it as a mine."),a.a.createElement("p",null,a.a.createElement("strong",null,"Hold middle mouse button")," over an revealed cell to highlight its neighbors."),a.a.createElement("p",null,a.a.createElement("strong",null,"Tip #1:")," If you've placed enough flags near a revealed cell, you can left click on it to automatically reveal cells without flags."),a.a.createElement("p",null,a.a.createElement("strong",null,"Tip #2:")," The first cell you click will never be a mine, so don't worry about where to click.")))}function ne(){var e=Object(c.a)(['\n   --light-blue: #06a4ed;\n   --dark-blue: #149dd7;\n   --light-orange: #ffaf2a;\n   --dark-orange: #fd9f00;\n   --light-gray: #3f3d40;\n   --dark-gray: #2a2d32;\n\n   height: 100vh;\n   \n   overflow: auto;\n   display: grid;\n\n   grid-template-rows: 90px 330px 40px 210px 70px;\n\n   grid-template-areas:\n      "header"\n      "board"\n      "status"\n      "settings"\n      "info";\n\n   @media screen and (min-width: 768px) {\n      grid-template-columns: 360px auto;\n      grid-template-rows: 100px 80px 230px auto;\n\n      grid-template-areas:\n         "header   board"\n         "status   board"\n         "settings board"\n         "info     board";\n   }\n\n   color: ',";\n   background-color: ",";\n\n   transition: color 0.3s linear,\n               background-color 0.3s linear;\n      \n   * {\n      font-family: 'Montserrat', sans-serif;\n   }\n\n   a {\n      color: ",";\n      transition: color 0.3s linear;\n   }\n   \n   input {\n      color: ",";\n      background-color: ",";\n\n      transition: color 0.3s linear,\n                  background-color 0.3s linear;\n   }\n"]);return ne=function(){return e},e}function te(){var e=Object(c.a)(["      \n   html, body {\n      margin: 0;\n      user-select: none;\n   }\n      \n   ::-moz-focus-inner {\n      border: 0;\n   }\n"]);return te=function(){return e},e}var re=Object(g.b)(te()),ae=g.c.div(ne(),(function(e){return e.theme.colors.text}),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.text}),(function(e){return e.theme.colors.text}),(function(e){return e.theme.colors.background}));function ie(){var e=f({initSize:9,initMineCount:10}),n=e.gridSize,t=e.mineCount,i=e.board,l=e.resetBoard,c=e.tryRevealCell,u=e.tryRevealUnflaggedNeighbors,s=e.tryFlagCell,d=e.highlightCells,m=e.unhighlightCells,h=e.getGameState,b=function(e,n){var t=localStorage.getItem(e),a=Object(r.useState)(t?JSON.parse(t):n),i=Object(o.a)(a,2),l=i[0],c=i[1];return Object(r.useEffect)((function(){localStorage.setItem(e,JSON.stringify(l))}),[e,l]),[l,c]}("darkTheme",!1),p=Object(o.a)(b,2),v=p[0],x=p[1],y=v?z:C;return a.a.createElement(g.a,{theme:y},a.a.createElement(re,{theme:y}),a.a.createElement(ae,{onContextMenu:function(e){return e.preventDefault()},onMouseUp:function(e){1===e.button&&m()},onMouseDown:function(e){4===e.buttons&&e.preventDefault()}},a.a.createElement(L,{onThemeToggle:function(){return x(!v)}}),a.a.createElement(N,{gameState:h(),minesLeft:t-i.flagged.countBy(Boolean)}),a.a.createElement(Z,{gridSize:n,mineCount:t,onSettingsUpdate:function(e,n){l(e,n)}}),a.a.createElement(ee,null),a.a.createElement(w,{gridSize:n,boardState:i,onLeftClick:function(e){i.revealed[e]?u(e):c(e)},onRightClick:function(e,n){e.preventDefault(),s(n)},onMiddleOver:function(e,n){4===e.buttons&&d(n)}})))}l.a.render(a.a.createElement(ie,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.caaa1525.chunk.js.map