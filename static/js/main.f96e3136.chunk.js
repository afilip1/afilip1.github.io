(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(16)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(7),i=n.n(l),c=(n(13),n(1));Array.prototype.equals=function(e){return this.length===e.length&&this.every((function(t,n){return t===e[n]}))},Array.prototype.shuffle=function(){for(var e=this.length-1;e>0;e--){var t=Math.floor(Math.random()*(e+1)),n=[this[t],this[e]];this[e]=n[0],this[t]=n[1]}return this},Array.prototype.zip=function(e){return this.map((function(t,n){return[t,e[n]]}))},Array.prototype.withIndex=function(){return Array.from(this.entries())},Array.prototype.countBy=function(e){return this.filter(e).length};var o=n(4);function u(e){var t=e.label,n=e.value,a=e.onChange;return r.a.createElement("label",null,t,r.a.createElement("input",{type:"number",value:n,onChange:function(e){return a(+e.currentTarget.value)}}))}function s(e,t){var n=Object(a.useState)(e),r=Object(c.a)(n,2),l=r[0],i=r[1];return[l,function(e){i(e),t(e)}]}function f(e){var t=Object(a.useState)(!1),n=Object(c.a)(t,2),l=n[0],i=n[1],o=function(){return i(!0)},f=s(e.gridSize,o),m=Object(c.a)(f,2),g=m[0],d=m[1],v=s(e.mineCount,o),h=Object(c.a)(v,2),b=h[0],p=h[1];return r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSettingsUpdate(g,b),i(!1)},autoComplete:"off"},r.a.createElement(u,{label:"Grid size",value:g,onChange:d}),r.a.createElement(u,{label:"Mine count",value:b,onChange:p}),r.a.createElement("button",{type:"submit"},l?"Apply and restart":"Restart"))}var m,g=n(5);function d(e){var t=e.initSize,n=e.initMineCount,r=function(e){var t=Object(a.useState)(e),n=Object(c.a)(t,2),r=n[0],l=n[1],i=Object(a.useCallback)((function(e){var t,n=[(t=e)%r,Math.floor(t/r)],a=Object(c.a)(n,2),l=a[0],i=a[1];return[[l-1,i-1],[l,i-1],[l+1,i-1],[l-1,i],[l+1,i],[l-1,i+1],[l,i+1],[l+1,i+1]].filter((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return n>=0&&n<r&&a>=0&&a<r})).map((function(e){var t=Object(c.a)(e,2),n=t[0];return t[1]*r+n}))}),[r]);return{gridSize:r,setGridSize:l,getNeighbors:i}}(t),l=r.gridSize,i=r.setGridSize,o=r.getNeighbors,u=Object(a.useState)(n),s=Object(c.a)(u,2),f=s[0],d=s[1],v=Object(a.useState)(null),h=Object(c.a)(v,2),b=h[0],p=h[1],E=Object(a.useState)([]),y=Object(c.a)(E,2),j=y[0],O=y[1],C=Object(a.useState)([]),S=Object(c.a)(C,2),k=S[0],z=S[1],A=Object(a.useState)(Array(l*l).fill(!1)),L=Object(c.a)(A,2),M=L[0],w=L[1],R=Object(a.useState)(Array(l*l).fill(!1)),I=Object(c.a)(R,2),N=I[0],x=I[1],B=Object(a.useState)(Array(l*l).fill(!1)),T=Object(c.a)(B,2),D=T[0],F=T[1],G=Object(a.useState)(null),P=Object(c.a)(G,2),U=P[0],W=P[1],q=Object(a.useCallback)((function(e){var t=Array(l*l-1).fill(!0,0,f).fill(!1,f).shuffle();t.splice(e,0,!1);var n=t.withIndex().map((function(e){var n=Object(c.a)(e,2),a=n[0];return n[1]?null:o(a).countBy((function(e){return t[e]}))}));O(t),z(n)}),[l,f,o]),H=Object(a.useCallback)((function(){var e=j.map((function(e){return!e})),t=j.equals(N);return M.equals(e)&&t?m.Won:M.zip(j).some((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return n&&a}))?m.Lost:m.InProgress}),[j,N,M]),J=Object(a.useCallback)((function(){for(var e=M.slice(),t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(n.forEach((function(t){return e[t]=!0}));n.length>0;){var r=n.shift();if(j[r]&&function(){e[r]=!0;var t=o(r).concat(r),n=Array(l*l).fill(!0);t.forEach((function(e){return n[e]=!1})),F(n)}(),0===k[r]){var i=o(r).filter((function(t){return!e[t]}));i.forEach((function(t){return e[t]=!0})),n.push.apply(n,Object(g.a)(i))}}return e}),[k,o,l,j,M]),Y=Object(a.useCallback)((function(e){if(H()===m.InProgress){if(0===j.length)return q(e),void p(e);N[e]||(j[e]?function(e){var t=M.zip(j).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return n||a}));w(t);var n=o(e).concat(e),a=Array(l*l).fill(!0);n.forEach((function(e){return a[e]=!1})),F(a)}(e):function(e){var t=J(e),n=N.slice();n[e]=!1,w(t),x(n)}(e),W(e))}}),[l,j,M,N,H,o,q,J]);b&&(Y(b),p(null));return{gridSize:l,mineCount:f,setMineCount:d,board:{mines:j,revealed:M,flagged:N,adjacent:k,dimmed:D,lastRevealed:U},resetBoard:function(e,t){i(e),d(t),O([]),z([]),w(Array(e*e).fill(!1)),x(Array(e*e).fill(!1)),F(Array(e*e).fill(!1)),W(null)},tryRevealCell:Y,tryFlagCell:function(e){if(H()===m.InProgress){var t=N.slice();t[e]=!t[e],x(t)}},tryRevealUnflaggedNeighbors:function(e){var t=o(e);if(t.filter((function(e){return N[e]})).length===k[e]){var n=t.filter((function(e){return!(M[e]||N[e])}));w(J.apply(void 0,Object(g.a)(n)))}},highlightCells:function(e){var t=o(e).concat(e),n=Array(l*l).fill(!0);t.forEach((function(e){return n[e]=!1})),F(n)},unhighlightCells:function(){F(Array(l*l).fill(!1))},getGameState:H}}function v(e){var t,n=e.gameState,a=e.minesLeft;switch(n){case m.InProgress:t="Flags left: "+a;break;case m.Won:t="You won!";break;case m.Lost:t="You lost :("}return r.a.createElement("h2",null,t)}function h(e){var t,n=Object(a.useState)(null===(t=e.collapsed)||void 0===t||t),l=Object(c.a)(n,2),i=l[0],o=l[1];return r.a.createElement("div",{className:"collapsible"},r.a.createElement("h2",{style:{display:"inline"}},e.title),r.a.createElement("button",{onClick:function(){return o(!i)}},i?"+":"-"),!i&&e.children)}function b(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,{title:"Rules"},r.a.createElement("p",null,"The board contains a number of cells. Each cell can be either empty or a mine."),r.a.createElement("p",null,"The goal of the game is to flag all the mines and reveal all the empty cells."),r.a.createElement("p",null,"If you reveal a mine, it's game over!"),r.a.createElement("p",null,"Empty cells show the number of mines that reside in the 8 adjacent cells.")),r.a.createElement(h,{title:"Controls"},r.a.createElement("p",null,r.a.createElement("strong",null,"Left click")," on an unrevealed cell to reveal it."),r.a.createElement("p",null,r.a.createElement("strong",null,"Right click")," on an unrevealed cell to flag it as a mine."),r.a.createElement("p",null,r.a.createElement("strong",null,"Hold middle mouse button")," over an revealed cell to highlight its neighbors."),r.a.createElement("p",null,r.a.createElement("strong",null,"Tip #1:")," If you've placed enough flags near a revealed cell, you can left click on it to automatically reveal cells without flags."),r.a.createElement("p",null,r.a.createElement("strong",null,"Tip #2:")," The first cell you click will never be a mine, so don't worry about where to click.")))}!function(e){e[e.InProgress=0]="InProgress",e[e.Won=1]="Won",e[e.Lost=2]="Lost"}(m||(m={}));n(14);function p(e){var t=e.gameState,n=e.minesLeft,a=Object(o.a)(e,["gameState","minesLeft"]);return r.a.createElement("div",{className:"side-panel"},r.a.createElement("h1",null,"MINEKONG"),r.a.createElement("small",null,"inspired by ",r.a.createElement("a",{href:"https://store.steampowered.com/app/265890/Hexcells/"},"Hexcells")),r.a.createElement(v,{gameState:t,minesLeft:n}),r.a.createElement(f,a),r.a.createElement(b,null))}function E(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=Object(a.useState)(null!==(t=localStorage.getItem(e))&&void 0!==t?t:n),l=Object(c.a)(r,2),i=l[0],o=l[1];return Object(a.useEffect)((function(){localStorage.setItem(e,i)}),[e,i]),[i,o]}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=E(e,t.toString()),a=Object(c.a)(n,2),r=a[0],l=a[1],i=+r,o=function(e){return l(e.toString())};return[i,o]}function j(e){var t=e.size,n=e.cellSize,a=e.children,l={gridTemplateColumns:"repeat(".concat(t,", ").concat(n,")"),gridAutoRows:n};return r.a.createElement("div",{className:"board-grid",style:l},a)}function O(e){var t=e.isMine,n=e.isLastRevealed,a=e.adjacentCount,l=e.onLeftClick,i=e.onMiddleOver;return r.a.createElement("div",{className:"cell-inner cell-revealed",onClick:l,onMouseEnter:i,onMouseDown:i},t?n?"\ud83d\udca5":"\ud83d\udca3":a>0&&a)}function C(e){var t=e.isFlagged,n=e.onLeftClick,a=e.onRightClick,l="cell-inner cell-hidden";return t&&(l+=" cell-flagged"),r.a.createElement("div",{className:l,onClick:n,onContextMenu:a})}function S(e,t,n){var a=t.revealed[e],l=t.dimmed[e];return r.a.createElement(k,{isDimmed:l,key:e},a?function(e,t,n){var a=t.mines[e],l=t.adjacent[e],i=t.lastRevealed===e;return r.a.createElement(O,{isMine:a,isLastRevealed:i,adjacentCount:l,onLeftClick:function(){return n.onLeftClick(e)},onMiddleOver:function(t){return n.onMiddleOver(t,e)}})}(e,t,n):function(e,t,n){var a=t.flagged[e];return r.a.createElement(C,{isFlagged:a,onLeftClick:function(){return n.onLeftClick(e)},onRightClick:function(t){return n.onRightClick(t,e)}})}(e,t,n))}function k(e){var t=e.isDimmed,n=e.children,a="cell";return t&&(a+=" cell-dimmed"),r.a.createElement("div",{className:a},n)}n(15);function z(e){var t,n,a=e.gridSize,l=e.boardState,i=Object(o.a)(e,["gridSize","boardState"]),c=(t=0,n=l.revealed.length,Array.from({length:n-t},(function(e,n){return n+t}))).map((function(e){return S(e,l,i)}));return r.a.createElement(j,{size:a,cellSize:"50px"},c)}function A(){var e=y("size",9),t=Object(c.a)(e,2),n=t[0],a=t[1],l=y("mineCount",10),i=Object(c.a)(l,2),o=i[0],u=i[1],s=d({initSize:n,initMineCount:o}),f=s.gridSize,m=s.mineCount,g=s.board,v=s.resetBoard,h=s.tryRevealCell,b=s.tryRevealUnflaggedNeighbors,E=s.tryFlagCell,j=s.highlightCells,O=s.unhighlightCells,C=s.getGameState;return r.a.createElement("div",{className:"game",onContextMenu:function(e){return e.preventDefault()},onMouseUp:function(e){1===e.button&&O()}},r.a.createElement(p,{gridSize:f,mineCount:m,gameState:C(),minesLeft:m-g.flagged.countBy(Boolean),onSettingsUpdate:function(e,t){a(e),u(t),v(e,t)}}),r.a.createElement(z,{gridSize:f,boardState:g,onLeftClick:function(e){g.revealed[e]?b(e):h(e)},onRightClick:function(e,t){e.preventDefault(),E(t)},onMiddleOver:function(e,t){4===e.buttons&&j(t)}}))}function L(){return r.a.createElement(A,null)}i.a.render(r.a.createElement(L,null),document.getElementById("root"))}],[[8,1,2]]]);
//# sourceMappingURL=main.f96e3136.chunk.js.map